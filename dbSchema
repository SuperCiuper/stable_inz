CREATE  TABLE "public".main_info ( 
	id                   boolean DEFAULT true NOT NULL  ,
	name                 text DEFAULT 'Stable' NOT NULL  ,
	"password"           text DEFAULT 'admin' NOT NULL  ,
	main_theme_rgb       text DEFAULT 000000 NOT NULL  ,
	support_theme_rgb    text DEFAULT 'ffffff' NOT NULL  ,
	background_rgb       text DEFAULT 666666 NOT NULL  ,
	CONSTRAINT pk_main_info PRIMARY KEY ( id )
 );

ALTER TABLE "public".main_info ADD CONSTRAINT cns_main_info CHECK ( id );

CREATE  TABLE "public".offer ( 
	item                 text DEFAULT 'Item' NOT NULL  ,
	for_whom             text DEFAULT 'Everyone' NOT NULL  ,
	description          text DEFAULT 'Description' NOT NULL  ,
	proposed_price       text DEFAULT 'Proposed price' NOT NULL  ,
	CONSTRAINT pk_offer PRIMARY KEY ( item )
 );

CREATE  TABLE "public".price_list ( 
	item                 text DEFAULT 'Item' NOT NULL  ,
	price                decimal(8,2) DEFAULT 1.00 NOT NULL  ,
	CONSTRAINT pk_price_list PRIMARY KEY ( item )
 );

CREATE  TABLE "public".contact_info ( 
	id                   boolean DEFAULT true NOT NULL  ,
	city                 text DEFAULT 'City' NOT NULL  ,
	street               text DEFAULT 'Street' NOT NULL  ,
	phone_number         decimal(9,0)    ,
	mail                 text    ,
	gmap_hash            text    ,
	CONSTRAINT pk_contact_info PRIMARY KEY ( id )
 );

ALTER TABLE "public".contact_info ADD CONSTRAINT cns_contact_info CHECK ( phone_number >= 100000000 );

CREATE  TABLE "public".horse ( 
	name                 text  NOT NULL  ,
	profile_image_id     smallint    ,
	description          text DEFAULT 'Description' NOT NULL  ,
	CONSTRAINT pk_horse PRIMARY KEY ( name ),
	CONSTRAINT unq_horse_name UNIQUE ( name ) 
 );

CREATE  TABLE "public".image ( 
	id                   smallserial  NOT NULL  ,
	horse_name           text    ,
	trainer_name         text    ,
	offer_item           text    ,
	CONSTRAINT pk_image PRIMARY KEY ( id )
 );

CREATE  TABLE "public".text ( 
	id                   boolean DEFAULT true NOT NULL  ,
	main_page_description text DEFAULT 'Description' NOT NULL  ,
	main_page_image_id   smallint    ,
	CONSTRAINT pk_text PRIMARY KEY ( id )
 );

CREATE  TABLE "public".trainer ( 
	name                 text  NOT NULL  ,
	profile_image_id     smallint    ,
	description          text DEFAULT 'Description'   ,
	CONSTRAINT pk_trainer PRIMARY KEY ( name )
 );

ALTER TABLE "public".contact_info ADD CONSTRAINT fk_contact_info_main_info FOREIGN KEY ( id ) REFERENCES "public".main_info( id ) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "public".horse ADD CONSTRAINT fk_horse_image FOREIGN KEY ( profile_image_id ) REFERENCES "public".image( id );

ALTER TABLE "public".image ADD CONSTRAINT fk_image_horse FOREIGN KEY ( horse_name ) REFERENCES "public".horse( name ) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE "public".image ADD CONSTRAINT fk_image_trainer FOREIGN KEY ( trainer_name ) REFERENCES "public".trainer( name ) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE "public".image ADD CONSTRAINT fk_image_offer FOREIGN KEY ( offer_item ) REFERENCES "public".offer( item ) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE "public".text ADD CONSTRAINT fk_text_main_info FOREIGN KEY ( id ) REFERENCES "public".main_info( id ) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "public".text ADD CONSTRAINT fk_text_image FOREIGN KEY ( main_page_image_id ) REFERENCES "public".image( id );

ALTER TABLE "public".trainer ADD CONSTRAINT fk_trainer_image FOREIGN KEY ( profile_image_id ) REFERENCES "public".image( id ) ON DELETE SET NULL ON UPDATE SET NULL;

COMMENT ON COLUMN "public".main_info."password" IS 'change';

COMMENT ON COLUMN "public".contact_info.gmap_hash IS 'when I lear how to use gmap with React';

